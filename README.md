# TS_Marker
联系邮箱：zipengwang@Gmail.com
## 前言
本人目前正在从事空间物理学相关工作，在进行统计研究的时候需要对一堆图进行筛选，筛选出一个我们需要的东西，然后集中进行研究。这些图件都是时间序列图，在从前的筛选中，我们使用的基本上是手动选图与挑选时间。本软件就将选图与时间导出的工作使用MATLAB_APP完成，**我们只需要简单的进行标记即可输出时间信息与标记图件**。

## 技术路线
本软件主要包括以下三个部分：1.图件名称整理；2.标记选图与导出；3.时间序列读取

### 1.图件名称整理
本软件包读取的时间信息有一部分来自图件名称，需要严格的文件名称格式与图片大小，如下所示
```math
<任务名>_ NO _ <编号> _ <图代号> _ <起始时间>-<结束时间>.png
```
其中由于暂时的技术限制，起始时间与结束时间使用yyyy-mm-dd_HHMM格式，其中yyyy为年份；mm代表月份；dd表示日期；HH是小时；MM是分钟，这些也需要严格按照格式。如2004年3月11日10点23分，时间格式为：2004-03-11_1023。
如果时间不是整数，如从2004年3月11日10点23分32秒到2004年3月11日10点33分32秒，为保证数据不被遗漏，作者建议扩充一下时间到分钟：2004年3月11日10点23分到2004年3月11日10点34分.

本部分主要由函数`save_fig.m`与`time_rounded.m`完成

### 2.标记与导出
本软件通过MATLAB的GUI界面完成标记，用户可以简单的用点击鼠标等的方式完成工作。
**时间读取与标记逻辑：**
用户在标记第一张图的时候，需要首先标记时间起始点，假设起始点的x坐标为 $x_{start}$ 与 $x_{end}$ 标记区域的起始点为 $x$ 与 $x'$ 起始时间为 $t_{start}$ 与 $t_end$ ，则时间按以下公式读取：
```math
t\ =\frac{t_end-t_start}{x_end-x_start}\left( x-x_start \right)
```
```math
t'=\frac{t_end-t_start}{x_end-x_start}\left( x'-x_start \right)
```
最后时间信息按照格式`yyyy.mm.dd.HH.MM.SS.sss:yyyy.mm.dd.HH.MM.SS.sss`为一行保存在结果文件夹中的`time_info.txt`中其中SS与sss分别代表秒与毫秒

本部分主要由函数`TS_mark_v1_4_app.m`与`TS_mark_app.mlapp`完成，用户只需要运行`TS_mark_app.mltbx`即可

### 3.时间序列读取

主要读取输出的时间序列文件`time_info.txt`，并读取成matlab的datatime数据

本部分主要由函数`read_time_info.m`完成

## 使用教程
(2025/11/07 wzp:先写到这，外卖到了饿死我了)